\documentclass[10pt,letter,oneside]{scrbook}
\usepackage[landscape]{geometry}
\usepackage{caption}
\usepackage{etoolbox}
\usepackage[final]{grffile}
\usepackage{graphicx}
\usepackage{fancyvrb}
\usepackage[T1]{fontenc}
\usepackage{fancyhdr}
\usepackage{listings}
\usepackage{lscape}
\usepackage{calc}
\graphicspath{{/home/mkg/Dropbox/images/}}
\pagestyle{headings}
\usepackage{lipsum}
\usepackage{url}
\usepackage[hidelinks=true,linktoc=all]{hyperref}
\urlstyle{same}
\usepackage[all]{hypcap}
\setlength{\parindent}{0em}
\setlength{\parskip}{1ex}

\makeatletter
\newcommand{\shellcommand}[1]{\@@input"|#1"}
\makeatother

\newcommand{\photopage } { 
	\catcode`_=12 \dophotopage 
}

\newcommand{\dophotopage}[3][landscape] {
	\KOMAoptions{pagesize, paper=#1}
	\clearpage
	\recalctypearea
	\newpage
	\noindent #3
	\lstinputlisting{|"exiftool -@ tags '/home/mkg/Dropbox/images/#2'"} 
	\newpage
	\begin{figure}
		\includegraphics[width=\linewidth,height=\textheight,keepaspectratio]{#2}	
		\captionlistentry[figure]{\url{\protect\detokenize{#2}}}
	\end{figure} 
}